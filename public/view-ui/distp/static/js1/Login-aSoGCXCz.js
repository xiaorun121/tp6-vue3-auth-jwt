import{_}from"../js2/index-A1W57FR6.js";import{aM as n,az as u,q as g,z as o,bs as i,r as f}from"./_@vue-AcWbRQZ2.js";import"./__vendor-oHGn7YgQ.js";const w={data(){return{captcha:"http://www.tp6.com/api/v1/verify"}},created(){this.handleGetCaptcha()},methods:{handleSubmit(e,{username:t,password:a,captcha:c}){e&&(this.$Message.loading({content:"登录中...",top:100}),this.login({username:t,password:a,captcha:c}))},handleGetCaptcha(){let e=this,t="http://www.tp6.com/api/v1/verify?"+Math.random();e.captcha=t},async login(e){let t=this;await t.$api.Admin.login(e).then(function(a){a.data.code==201?(t.$Message.success(a.data.msg),setTimeout(()=>{t.$router.push("/")},1e3)):(t.$Message.error(a.data.msg),t.handleGetCaptcha())}).catch(function(a){t.$Message.success(a)})}}},C={class:"demo-login"},b=["src"];function S(e,t,a,c,r,s){const h=n("UserName"),m=n("Password"),p=n("Captcha"),d=n("Submit"),l=n("Login",!0);return u(),g("div",C,[o(l,{onOnSubmit:s.handleSubmit},{default:i(()=>[o(h,{name:"username"}),o(m,{name:"password"}),o(p,{class:"demo-login-captcha",name:"captcha","count-down":0,onOnGetCaptcha:s.handleGetCaptcha},{text:i(()=>[f("img",{src:r.captcha},null,8,b)]),_:1},8,["onOnGetCaptcha"]),o(d)]),_:1},8,["onOnSubmit"])])}const M=_(w,[["render",S]]);export{M as default};
//# sourceMappingURL=Login-aSoGCXCz.js.map
