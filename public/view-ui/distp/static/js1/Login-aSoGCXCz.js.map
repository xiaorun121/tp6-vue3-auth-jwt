{"version":3,"file":"Login-aSoGCXCz.js","sources":["../../../src/views/admin/Login.vue"],"sourcesContent":["<template>\r\n    <div class=\"demo-login\">\r\n        <Login @on-submit=\"handleSubmit\">\r\n            <UserName name=\"username\" />\r\n            <Password name=\"password\" />\r\n            <Captcha class=\"demo-login-captcha\" name=\"captcha\" :count-down=\"0\" @on-get-captcha=\"handleGetCaptcha\">\r\n                <template #text>\r\n                  <img :src=\"captcha\">\r\n                </template>\r\n            </Captcha>\r\n            <Submit />\r\n        </Login>\r\n    </div>\r\n</template>\r\n<script>\r\n    export default {\r\n        data () {\r\n            return {\r\n                captcha: 'http://www.tp6.com/api/v1/verify'\r\n            }\r\n        },\r\n        created() {\r\n\r\n            // 刷新验证码\r\n            this.handleGetCaptcha();\r\n\r\n        },\r\n        methods: {\r\n            // 数据验证\r\n            handleSubmit (valid, { username, password, captcha }) {\r\n                if (valid) {\r\n                    this.$Message.loading({\r\n                        content: '登录中...',\r\n                        top: 100\r\n                    });\r\n                    this.login({username:username,password:password,captcha:captcha});\r\n                }\r\n            },\r\n            // 点击切换验证码\r\n            handleGetCaptcha () {\r\n                let that = this;\r\n                let newSrc = 'http://www.tp6.com/api/v1/verify' + '?' + Math.random();\r\n\r\n                // 更新验证码图片的 src 属性\r\n                that.captcha = newSrc;\r\n            },\r\n            // 提交数据\r\n            async login(data){\r\n                let that = this;\r\n                await that.$api.Admin.login(data).then( function (response) {\r\n                    if (response.data.code == 201) {\r\n                        that.$Message.success(response.data.msg);\r\n                        setTimeout(() => {\r\n                            that.$router.push('/');\r\n                        }, 1000);\r\n                    } else {\r\n                        that.$Message.error(response.data.msg);\r\n                        that.handleGetCaptcha();\r\n                    }\r\n                }).catch( function(error) {\r\n                    that.$Message.success(error);\r\n                });\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style>\r\n    .demo-login{\r\n        width: 400px !important;\r\n        height: 500px;\r\n        margin-top: 10% !important;\r\n        margin: 0 auto;\r\n    }\r\n    .demo-login-captcha .ivu-btn{\r\n        padding: 0;\r\n    }\r\n    .demo-login-captcha .ivu-btn img{\r\n        height: 35px;\r\n        width: 120px;\r\n        position: relative;\r\n        top: 2px;\r\n    }\r\n</style>"],"names":["_sfc_main","valid","username","password","captcha","that","newSrc","data","response","error","_hoisted_1","_openBlock","_createElementBlock","_createVNode","_component_Login","$options","_component_UserName","_component_Password","_component_Captcha","_createElementVNode","$data","_hoisted_2","_component_Submit"],"mappings":"qJAeI,MAAKA,EAAU,CACX,MAAQ,CACJ,MAAO,CACH,QAAS,kCACb,CACH,EACD,SAAU,CAGN,KAAK,iBAAgB,CAExB,EACD,QAAS,CAEL,aAAcC,EAAO,CAAE,SAAAC,EAAU,SAAAC,EAAU,QAAAC,CAAQ,EAAG,CAC9CH,IACA,KAAK,SAAS,QAAQ,CAClB,QAAS,SACT,IAAK,GACT,CAAC,EACD,KAAK,MAAM,CAAC,SAASC,EAAS,SAASC,EAAS,QAAQC,CAAO,CAAC,EAEvE,EAED,kBAAoB,CAChB,IAAIC,EAAO,KACPC,EAAS,oCAA2C,KAAK,OAAM,EAGnED,EAAK,QAAUC,CAClB,EAED,MAAM,MAAMC,EAAK,CACb,IAAIF,EAAO,KACX,MAAMA,EAAK,KAAK,MAAM,MAAME,CAAI,EAAE,KAAM,SAAUC,EAAU,CACpDA,EAAS,KAAK,MAAQ,KACtBH,EAAK,SAAS,QAAQG,EAAS,KAAK,GAAG,EACvC,WAAW,IAAM,CACbH,EAAK,QAAQ,KAAK,GAAG,CACxB,EAAE,GAAI,IAEPA,EAAK,SAAS,MAAMG,EAAS,KAAK,GAAG,EACrCH,EAAK,iBAAgB,GAE5B,EAAE,MAAO,SAASI,EAAO,CACtBJ,EAAK,SAAS,QAAQI,CAAK,CAC/B,CAAC,CACL,CACJ,CACJ,EA/DKC,EAAA,CAAA,MAAM,YAAY,uHAAvB,OAAAC,EAAA,EAAAC,EAWM,MAXNF,EAWM,CAVFG,EASQC,EAAA,CATA,WAAWC,EAAY,YAAA,EAAA,WAC3B,IAA4B,CAA5BF,EAA4BG,EAAA,CAAlB,KAAK,UAAU,CAAA,EACzBH,EAA4BI,EAAA,CAAlB,KAAK,UAAU,CAAA,EACzBJ,EAIUK,EAAA,CAJD,MAAM,qBAAqB,KAAK,UAAW,aAAY,EAAI,eAAgBH,EAAgB,mBACrF,OACT,IAAoB,CAApBI,EAAoB,MAAA,CAAd,IAAKC,EAAO,SAAA,KAAA,EAAAC,CAAA,+BAGxBR,EAAUS,CAAA"}